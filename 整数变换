#include<bits/stdc++.h>

using namespace std;
 
long long dfs(vector<vector<int>>moves , int start , vector<int>&used){
	if (used[start] == 1){
		return 0;
	}
	int len = 1;
	used[start] = 1;
	for (int i = 1 ; i < 10 ; i++){
		if (moves[start][i] > 0){
			len += dfs(moves,i,used);
		} 
	}
	return len;	
} 
int main(){
	string s;
	cin >> s;
	int n;
	cin >> n;
	vector<vector<int>>moves(10,vector<int>(10,-1));
	for (int i = 0 ; i < n ; i++){
		int x , y;
		cin >> x >> y;
		moves[x][y] = 1;
	}
	vector<long long>mu(10,1);
	vector<int>used(10,0);
	for (int i = 0 ; i < 10 ; i++){
		fill(used.begin(), used.end(), 0);
		mu[i] = dfs(moves,i,used); 
	}
	long long ans = 1;
	for (int i = 0 ; i < s.size() ; i++){
		int num = s[i]-'0';
		ans *= mu[num];
	}
	cout << ans << endl;
	return 0;
}
